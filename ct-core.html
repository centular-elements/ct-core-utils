<script>

  window.CT = window.CT || {};

  /**
   * The API host to use when making requests.
   */
  CT.apiHost = CT.apiHost || 'https://test-api.ordercloud.com/';

  /**
   * The user authentication token (Bearer|JWT)
   */
  CT.token = CT.token || null;

  /**
   * An object containing contextual info:
   * domainId, clientId, userId
   */
  CT.context = CT.context || null;

  CT.Behaviours.ContextCreator = {
    _setContext: function(jwtToken) {
      if (jwtToken) {
        var jwtClaimSetEncoded = jwtToken.split(".")[1];
        var jwtClaimSet = JSON.parse(atob(jwtClaimSetEncoded));
        CT.context = {
          domainId: jwtClaimSet.did,
          clientId: jwtClaimSet.cid,
          userId: jwtClaimSet.uid,
          token: jwtToken
        }
      } else {
        CT.context = null
      }
    }
  }

</script>
